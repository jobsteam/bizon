{% extends '2_cols.html' %}

{% load sorl_thumbnail %}

{% block title %}{{ article.title }}{% endblock %}

{% block description %}{{ article.intro }}{% endblock %}

{% block left %}
    <div class="article">
        <div class="article-pathway">
            <a href="/">Главная</a>
            /
            {% for ancestor_category in article.category.get_ancestors %}
                <a href="{{ ancestor_category.get_absolute_url }}">{{ ancestor_category }}</a>
                /
            {% endfor %}
            <a href="{{ article.category.get_absolute_url }}">{{ article.category }}</a>
        </div>
        <div class="article-head clear-block">
            <div class="article-date">{{ article.created }}</div>
            <div class="article-views">{{ article.views }}</div>
        </div>
        <h1>{{ article.title }}</h1>
        <div class="social"><em>Кнопки социальных сетей</em></div>
        {% thumbnail article.cover "830" crop="center" upscale=False as im %}
            <div class="article-{% if im.width < 700 %}minifoto{% else %}bigfoto{% endif %}">
                <img src="{{ im.url }}" width="100%">
            </div>
        {% endthumbnail %}
        <div class="article-text">
            {{ article.text|safe }}
        </div>
        <div class="article-footer">
            Автор:
            {% for autor in article.authors.all %}
                {{ autor.name }} {{ autor.last_name }}
            {% endfor %}
        </div>
        <div class="tags clear-block">
            <ul>
            {% for tag in article.tags.all %}
                <li><a href="{% url 'articles:tag' tag.slug %}">#{{ tag.name }}</a></li>
            {% endfor %}
            </ul>
        </div>
    </div>

    {% if related_article_list %}
        <div class="list">
            <h3>Новости по теме</h3>

            {% for related_article in related_article_list %}
                <div class="list-element auto-height clear-block">
                    <div class="list-element-foto">
                        {% thumbnail related_article.cover "400" crop="center" as im %}
                            <img src="{{ im.url }}" width="100%">
                        {% endthumbnail %}
                    </div>
                    <div class="list-element-info">
                        <a class="list-element-title" href="{{ related_article.get_absolute_url }}">{{ related_article.title }}</a>
                        <div class="list-element-category">
                            <a href="{{ related_article.category.get_absolute_url }}">{{ related_article.category.title }}</a>
                        </div>
                        <div class="list-element-lid">{{ related_article.intro }}</div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}


{% block right %}
    <div class="top-block block">
        <h3>Топ новостей</h3>
        {% for article_top in article_top_list %}
            <div class="top-new">
                <span>{{ article_top.created }}</span> 
                <a href="{{ article_top.get_absolute_url }}">
                    {{ article_top.title }}
                </a>
            </div>
        {% endfor %}
    </div>
    <div class="recomendation-block block clear-block">
        <h3>Самое свежее</h3>
        {% for article_last in article_last_list %}
            <div class="element-colomn  auto-height">
                <div class="new-colomn">
                    <div class="new-foto">
                        {% thumbnail article_last.cover "560" crop="center" as im %}
                            <img src="{{ im.url }}" width="100%">
                        {% endthumbnail %}
                        <div class="pix"></div>
                        <div class="new-title">{{ article_last.title }}</div>
                        <a class="new-link" href="{{ article_last.get_absolute_url }}"></a>
                    </div>
                    <div class="new-info">{{ article_last.intro }}</div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}